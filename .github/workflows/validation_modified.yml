jobs:
  build:
    name: Verify
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Set environment variables from file
      id: set-env
      run: |
        set -a
        source ci-params.txt
        echo "maven_matrix=$maven_matrix" >> $GITHUB_ENV
        echo "jdk_matrix=$jdk_matrix" >> $GITHUB_ENV
        echo "os_matrix=$os_matrix" >> $GITHUB_ENV
        set +a
      shell: bash

    - name: Run Maven Verify
      uses: apache/maven-gh-actions-shared/.github/workflows/maven-verify.yml@v4
      with:
        maven-matrix: ${{ env.maven_matrix }}
        jdk-matrix: ${{ env.jdk_matrix }}
        os-matrix: ${{ env.os_matrix }}